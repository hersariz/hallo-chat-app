"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/story/list/route";
exports.ids = ["app/api/story/list/route"];
exports.modules = {

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstory%2Flist%2Froute&page=%2Fapi%2Fstory%2Flist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstory%2Flist%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5CHallo%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5CHallo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstory%2Flist%2Froute&page=%2Fapi%2Fstory%2Flist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstory%2Flist%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5CHallo%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5CHallo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_xampp_htdocs_Hallo_src_app_api_story_list_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/story/list/route.ts */ \"(rsc)/./src/app/api/story/list/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/story/list/route\",\n        pathname: \"/api/story/list\",\n        filename: \"route\",\n        bundlePath: \"app/api/story/list/route\"\n    },\n    resolvedPagePath: \"C:\\\\xampp\\\\htdocs\\\\Hallo\\\\src\\\\app\\\\api\\\\story\\\\list\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_xampp_htdocs_Hallo_src_app_api_story_list_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/story/list/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdG9yeSUyRmxpc3QlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN0b3J5JTJGbGlzdCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN0b3J5JTJGbGlzdCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDeGFtcHAlNUNodGRvY3MlNUNIYWxsbyU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q3hhbXBwJTVDaHRkb2NzJTVDSGFsbG8maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2M7QUFDM0Y7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWxsby8/OTlkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFx4YW1wcFxcXFxodGRvY3NcXFxcSGFsbG9cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcc3RvcnlcXFxcbGlzdFxcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3RvcnkvbGlzdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N0b3J5L2xpc3RcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3N0b3J5L2xpc3Qvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFx4YW1wcFxcXFxodGRvY3NcXFxcSGFsbG9cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcc3RvcnlcXFxcbGlzdFxcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3RvcnkvbGlzdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstory%2Flist%2Froute&page=%2Fapi%2Fstory%2Flist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstory%2Flist%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5CHallo%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5CHallo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/story/list/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/story/list/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _firebase_admin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/firebase/admin */ \"(rsc)/./src/firebase/admin.ts\");\n\n\nasync function GET(request) {\n    try {\n        // Verifikasi token Firebase\n        const authHeader = request.headers.get(\"Authorization\");\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const idToken = authHeader.split(\"Bearer \")[1];\n        // Verifikasi token\n        const decodedToken = await _firebase_admin__WEBPACK_IMPORTED_MODULE_1__.auth.verifyIdToken(idToken);\n        const userId = decodedToken.uid;\n        // Set waktu sekarang untuk filter\n        const now = new Date();\n        // Ambil semua stories yang belum kedaluwarsa (yang expiry time-nya masih lebih besar dari waktu sekarang)\n        // Ini lebih akurat daripada menggunakan waktu 24 jam yang lalu\n        const storiesSnapshot = await _firebase_admin__WEBPACK_IMPORTED_MODULE_1__.firestore.collection(\"stories\").where(\"expiryTime\", \">\", now).get();\n        // Jika expiryTime tidak ada di beberapa story lama, tetap gunakan filter timestamp 24 jam\n        if (storiesSnapshot.empty) {\n            console.log(\"Using fallback timestamp filter for stories\");\n            // Set waktu 24 jam yang lalu sebagai fallback\n            const oneDayAgo = new Date();\n            oneDayAgo.setHours(oneDayAgo.getHours() - 24);\n            const fallbackSnapshot = await _firebase_admin__WEBPACK_IMPORTED_MODULE_1__.firestore.collection(\"stories\").where(\"timestamp\", \">\", oneDayAgo).get();\n            if (fallbackSnapshot.empty) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    users: []\n                });\n            }\n        }\n        // Ambil semua ID pengguna yang memiliki stories\n        const userIds = new Set();\n        const storiesData = [];\n        storiesSnapshot.forEach((doc)=>{\n            const storyData = doc.data();\n            storiesData.push({\n                id: doc.id,\n                ...storyData,\n                resourceType: storyData.resourceType || \"image\",\n                duration: storyData.duration || null,\n                timestamp: storyData.timestamp.toDate().toISOString(),\n                expiryTime: storyData.expiryTime?.toDate().toISOString() || null\n            });\n            userIds.add(storyData.userId);\n        });\n        // Tambahkan userid pengguna saat ini juga, bahkan jika tidak ada story\n        // Ini untuk memastikan pengguna saat ini selalu ada dalam daftar\n        userIds.add(userId);\n        // Ambil data pengguna untuk semua user yang memiliki stories\n        const usersData = {};\n        const usersPromises = Array.from(userIds).map(async (uid)=>{\n            const userDoc = await _firebase_admin__WEBPACK_IMPORTED_MODULE_1__.firestore.collection(\"users\").doc(uid).get();\n            if (userDoc.exists) {\n                usersData[uid] = {\n                    id: uid,\n                    ...userDoc.data()\n                };\n            } else {\n                // Jika data pengguna tidak ada, gunakan data default\n                usersData[uid] = {\n                    id: uid,\n                    displayName: \"Pengguna\",\n                    photoURL: null\n                };\n            }\n        });\n        await Promise.all(usersPromises);\n        // Ambil data story yang sudah dilihat oleh pengguna menggunakan sub-collection\n        const viewedStoriesRef = _firebase_admin__WEBPACK_IMPORTED_MODULE_1__.firestore.collection(\"users\").doc(userId).collection(\"viewedStories\");\n        const viewedSnapshot = await viewedStoriesRef.get();\n        const viewedStories = [];\n        viewedSnapshot.forEach((doc)=>{\n            viewedStories.push(doc.id); // doc.id adalah storyId\n        });\n        console.log(`User ${userId} has viewed ${viewedStories.length} stories`);\n        // Kelompokkan stories berdasarkan userId\n        const groupedStories = {};\n        storiesData.forEach((story)=>{\n            if (!groupedStories[story.userId]) {\n                groupedStories[story.userId] = [];\n            }\n            groupedStories[story.userId].push(story);\n        });\n        // Format data dalam bentuk yang diharapkan\n        const formattedUsers = Object.keys(usersData).map((uid)=>{\n            return {\n                ...usersData[uid],\n                stories: groupedStories[uid] || [],\n                viewedStories: uid === userId ? viewedStories : []\n            };\n        });\n        // Filter users yang memiliki stories atau user saat ini\n        const filteredUsers = formattedUsers.filter((user)=>user.stories.length > 0 || user.id === userId);\n        // Log info debug\n        console.log(`Story API: Returning data for ${filteredUsers.length} users. Current user: ${userId}`);\n        console.log(`Story API: User has ${filteredUsers.find((u)=>u.id === userId)?.stories?.length || 0} stories`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            users: filteredUsers\n        });\n    } catch (error) {\n        console.error(\"Error retrieving stories:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to retrieve stories\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxDQUFDLDhCQUE4QixFQUFFMkMsY0FBY1AsTUFBTSxDQUFDLHNCQUFzQixFQUFFN0MsT0FBTyxDQUFDO1FBQ2xHUSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsRUFBRTJDLGNBQWNHLElBQUksQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRWpDLEVBQUUsS0FBS3ZCLFNBQVNtRCxTQUFTTixVQUFVLEVBQUUsUUFBUSxDQUFDO1FBRTNHLE9BQU83RCxxREFBWUEsQ0FBQ1MsSUFBSSxDQUFDO1lBQUVxQixPQUFPc0M7UUFBYztJQUNsRCxFQUFFLE9BQU8xRCxPQUFPO1FBQ2RjLFFBQVFkLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9WLHFEQUFZQSxDQUFDUyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE2QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNsRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFsbG8vLi9zcmMvYXBwL2FwaS9zdG9yeS9saXN0L3JvdXRlLnRzPzM5YjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgYXV0aCwgZmlyZXN0b3JlIH0gZnJvbSAnQC9maXJlYmFzZS9hZG1pbic7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFZlcmlmaWthc2kgdG9rZW4gRmlyZWJhc2VcclxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCdBdXRob3JpemF0aW9uJyk7XHJcbiAgICBcclxuICAgIGlmICghYXV0aEhlYWRlciB8fCAhYXV0aEhlYWRlci5zdGFydHNXaXRoKCdCZWFyZXIgJykpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCdCZWFyZXIgJylbMV07XHJcbiAgICBcclxuICAgIC8vIFZlcmlmaWthc2kgdG9rZW5cclxuICAgIGNvbnN0IGRlY29kZWRUb2tlbiA9IGF3YWl0IGF1dGgudmVyaWZ5SWRUb2tlbihpZFRva2VuKTtcclxuICAgIGNvbnN0IHVzZXJJZCA9IGRlY29kZWRUb2tlbi51aWQ7XHJcbiAgICBcclxuICAgIC8vIFNldCB3YWt0dSBzZWthcmFuZyB1bnR1ayBmaWx0ZXJcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBcclxuICAgIC8vIEFtYmlsIHNlbXVhIHN0b3JpZXMgeWFuZyBiZWx1bSBrZWRhbHV3YXJzYSAoeWFuZyBleHBpcnkgdGltZS1ueWEgbWFzaWggbGViaWggYmVzYXIgZGFyaSB3YWt0dSBzZWthcmFuZylcclxuICAgIC8vIEluaSBsZWJpaCBha3VyYXQgZGFyaXBhZGEgbWVuZ2d1bmFrYW4gd2FrdHUgMjQgamFtIHlhbmcgbGFsdVxyXG4gICAgY29uc3Qgc3Rvcmllc1NuYXBzaG90ID0gYXdhaXQgZmlyZXN0b3JlXHJcbiAgICAgIC5jb2xsZWN0aW9uKCdzdG9yaWVzJylcclxuICAgICAgLndoZXJlKCdleHBpcnlUaW1lJywgJz4nLCBub3cpXHJcbiAgICAgIC5nZXQoKTtcclxuICAgIFxyXG4gICAgLy8gSmlrYSBleHBpcnlUaW1lIHRpZGFrIGFkYSBkaSBiZWJlcmFwYSBzdG9yeSBsYW1hLCB0ZXRhcCBndW5ha2FuIGZpbHRlciB0aW1lc3RhbXAgMjQgamFtXHJcbiAgICBpZiAoc3Rvcmllc1NuYXBzaG90LmVtcHR5KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBmYWxsYmFjayB0aW1lc3RhbXAgZmlsdGVyIGZvciBzdG9yaWVzJyk7XHJcbiAgICAgIC8vIFNldCB3YWt0dSAyNCBqYW0geWFuZyBsYWx1IHNlYmFnYWkgZmFsbGJhY2tcclxuICAgICAgY29uc3Qgb25lRGF5QWdvID0gbmV3IERhdGUoKTtcclxuICAgICAgb25lRGF5QWdvLnNldEhvdXJzKG9uZURheUFnby5nZXRIb3VycygpIC0gMjQpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZmFsbGJhY2tTbmFwc2hvdCA9IGF3YWl0IGZpcmVzdG9yZVxyXG4gICAgICAgIC5jb2xsZWN0aW9uKCdzdG9yaWVzJylcclxuICAgICAgICAud2hlcmUoJ3RpbWVzdGFtcCcsICc+Jywgb25lRGF5QWdvKVxyXG4gICAgICAgIC5nZXQoKTtcclxuICAgICAgICBcclxuICAgICAgaWYgKGZhbGxiYWNrU25hcHNob3QuZW1wdHkpIHtcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB1c2VyczogW10gfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQW1iaWwgc2VtdWEgSUQgcGVuZ2d1bmEgeWFuZyBtZW1pbGlraSBzdG9yaWVzXHJcbiAgICBjb25zdCB1c2VySWRzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcbiAgICBjb25zdCBzdG9yaWVzRGF0YTogeyBba2V5OiBzdHJpbmddOiBhbnkgfVtdID0gW107XHJcbiAgICBcclxuICAgIHN0b3JpZXNTbmFwc2hvdC5mb3JFYWNoKGRvYyA9PiB7XHJcbiAgICAgIGNvbnN0IHN0b3J5RGF0YSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgIHN0b3JpZXNEYXRhLnB1c2goe1xyXG4gICAgICAgIGlkOiBkb2MuaWQsXHJcbiAgICAgICAgLi4uc3RvcnlEYXRhLFxyXG4gICAgICAgIHJlc291cmNlVHlwZTogc3RvcnlEYXRhLnJlc291cmNlVHlwZSB8fCAnaW1hZ2UnLCAvLyBEZWZhdWx0IHRvICdpbWFnZScgaWYgbm90IHNwZWNpZmllZFxyXG4gICAgICAgIGR1cmF0aW9uOiBzdG9yeURhdGEuZHVyYXRpb24gfHwgbnVsbCwgLy8gSW5jbHVkZSBkdXJhdGlvbiBmb3IgdmlkZW9cclxuICAgICAgICB0aW1lc3RhbXA6IHN0b3J5RGF0YS50aW1lc3RhbXAudG9EYXRlKCkudG9JU09TdHJpbmcoKSwgLy8gQ29udmVydCB0aW1lc3RhbXAga2UgSVNPIHN0cmluZ1xyXG4gICAgICAgIGV4cGlyeVRpbWU6IHN0b3J5RGF0YS5leHBpcnlUaW1lPy50b0RhdGUoKS50b0lTT1N0cmluZygpIHx8IG51bGxcclxuICAgICAgfSk7XHJcbiAgICAgIHVzZXJJZHMuYWRkKHN0b3J5RGF0YS51c2VySWQpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIFRhbWJhaGthbiB1c2VyaWQgcGVuZ2d1bmEgc2FhdCBpbmkganVnYSwgYmFoa2FuIGppa2EgdGlkYWsgYWRhIHN0b3J5XHJcbiAgICAvLyBJbmkgdW50dWsgbWVtYXN0aWthbiBwZW5nZ3VuYSBzYWF0IGluaSBzZWxhbHUgYWRhIGRhbGFtIGRhZnRhclxyXG4gICAgdXNlcklkcy5hZGQodXNlcklkKTtcclxuICAgIFxyXG4gICAgLy8gQW1iaWwgZGF0YSBwZW5nZ3VuYSB1bnR1ayBzZW11YSB1c2VyIHlhbmcgbWVtaWxpa2kgc3Rvcmllc1xyXG4gICAgY29uc3QgdXNlcnNEYXRhOiB7IFtrZXk6IHN0cmluZ106IGFueSB9ID0ge307XHJcbiAgICBjb25zdCB1c2Vyc1Byb21pc2VzID0gQXJyYXkuZnJvbSh1c2VySWRzKS5tYXAoYXN5bmMgdWlkID0+IHtcclxuICAgICAgY29uc3QgdXNlckRvYyA9IGF3YWl0IGZpcmVzdG9yZS5jb2xsZWN0aW9uKCd1c2VycycpLmRvYyh1aWQpLmdldCgpO1xyXG4gICAgICBpZiAodXNlckRvYy5leGlzdHMpIHtcclxuICAgICAgICB1c2Vyc0RhdGFbdWlkXSA9IHtcclxuICAgICAgICAgIGlkOiB1aWQsXHJcbiAgICAgICAgICAuLi51c2VyRG9jLmRhdGEoKVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gSmlrYSBkYXRhIHBlbmdndW5hIHRpZGFrIGFkYSwgZ3VuYWthbiBkYXRhIGRlZmF1bHRcclxuICAgICAgICB1c2Vyc0RhdGFbdWlkXSA9IHtcclxuICAgICAgICAgIGlkOiB1aWQsXHJcbiAgICAgICAgICBkaXNwbGF5TmFtZTogJ1BlbmdndW5hJyxcclxuICAgICAgICAgIHBob3RvVVJMOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGF3YWl0IFByb21pc2UuYWxsKHVzZXJzUHJvbWlzZXMpO1xyXG4gICAgXHJcbiAgICAvLyBBbWJpbCBkYXRhIHN0b3J5IHlhbmcgc3VkYWggZGlsaWhhdCBvbGVoIHBlbmdndW5hIG1lbmdndW5ha2FuIHN1Yi1jb2xsZWN0aW9uXHJcbiAgICBjb25zdCB2aWV3ZWRTdG9yaWVzUmVmID0gZmlyZXN0b3JlXHJcbiAgICAgIC5jb2xsZWN0aW9uKCd1c2VycycpXHJcbiAgICAgIC5kb2ModXNlcklkKVxyXG4gICAgICAuY29sbGVjdGlvbigndmlld2VkU3RvcmllcycpO1xyXG5cclxuICAgIGNvbnN0IHZpZXdlZFNuYXBzaG90ID0gYXdhaXQgdmlld2VkU3Rvcmllc1JlZi5nZXQoKTtcclxuXHJcbiAgICBjb25zdCB2aWV3ZWRTdG9yaWVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgdmlld2VkU25hcHNob3QuZm9yRWFjaChkb2MgPT4ge1xyXG4gICAgICB2aWV3ZWRTdG9yaWVzLnB1c2goZG9jLmlkKTsgLy8gZG9jLmlkIGFkYWxhaCBzdG9yeUlkXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhgVXNlciAke3VzZXJJZH0gaGFzIHZpZXdlZCAke3ZpZXdlZFN0b3JpZXMubGVuZ3RofSBzdG9yaWVzYCk7XHJcbiAgICBcclxuICAgIC8vIEtlbG9tcG9ra2FuIHN0b3JpZXMgYmVyZGFzYXJrYW4gdXNlcklkXHJcbiAgICBjb25zdCBncm91cGVkU3RvcmllczogeyBba2V5OiBzdHJpbmddOiBhbnlbXSB9ID0ge307XHJcbiAgICBzdG9yaWVzRGF0YS5mb3JFYWNoKHN0b3J5ID0+IHtcclxuICAgICAgaWYgKCFncm91cGVkU3Rvcmllc1tzdG9yeS51c2VySWRdKSB7XHJcbiAgICAgICAgZ3JvdXBlZFN0b3JpZXNbc3RvcnkudXNlcklkXSA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIGdyb3VwZWRTdG9yaWVzW3N0b3J5LnVzZXJJZF0ucHVzaChzdG9yeSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gRm9ybWF0IGRhdGEgZGFsYW0gYmVudHVrIHlhbmcgZGloYXJhcGthblxyXG4gICAgY29uc3QgZm9ybWF0dGVkVXNlcnMgPSBPYmplY3Qua2V5cyh1c2Vyc0RhdGEpLm1hcCh1aWQgPT4ge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIC4uLnVzZXJzRGF0YVt1aWRdLFxyXG4gICAgICAgIHN0b3JpZXM6IGdyb3VwZWRTdG9yaWVzW3VpZF0gfHwgW10sXHJcbiAgICAgICAgdmlld2VkU3RvcmllczogdWlkID09PSB1c2VySWQgPyB2aWV3ZWRTdG9yaWVzIDogW11cclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBGaWx0ZXIgdXNlcnMgeWFuZyBtZW1pbGlraSBzdG9yaWVzIGF0YXUgdXNlciBzYWF0IGluaVxyXG4gICAgY29uc3QgZmlsdGVyZWRVc2VycyA9IGZvcm1hdHRlZFVzZXJzLmZpbHRlcih1c2VyID0+IFxyXG4gICAgICB1c2VyLnN0b3JpZXMubGVuZ3RoID4gMCB8fCB1c2VyLmlkID09PSB1c2VySWRcclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIExvZyBpbmZvIGRlYnVnXHJcbiAgICBjb25zb2xlLmxvZyhgU3RvcnkgQVBJOiBSZXR1cm5pbmcgZGF0YSBmb3IgJHtmaWx0ZXJlZFVzZXJzLmxlbmd0aH0gdXNlcnMuIEN1cnJlbnQgdXNlcjogJHt1c2VySWR9YCk7XHJcbiAgICBjb25zb2xlLmxvZyhgU3RvcnkgQVBJOiBVc2VyIGhhcyAke2ZpbHRlcmVkVXNlcnMuZmluZCh1ID0+IHUuaWQgPT09IHVzZXJJZCk/LnN0b3JpZXM/Lmxlbmd0aCB8fCAwfSBzdG9yaWVzYCk7XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHVzZXJzOiBmaWx0ZXJlZFVzZXJzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIHN0b3JpZXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gcmV0cmlldmUgc3RvcmllcycgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImF1dGgiLCJmaXJlc3RvcmUiLCJHRVQiLCJyZXF1ZXN0IiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJzdGFydHNXaXRoIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiaWRUb2tlbiIsInNwbGl0IiwiZGVjb2RlZFRva2VuIiwidmVyaWZ5SWRUb2tlbiIsInVzZXJJZCIsInVpZCIsIm5vdyIsIkRhdGUiLCJzdG9yaWVzU25hcHNob3QiLCJjb2xsZWN0aW9uIiwid2hlcmUiLCJlbXB0eSIsImNvbnNvbGUiLCJsb2ciLCJvbmVEYXlBZ28iLCJzZXRIb3VycyIsImdldEhvdXJzIiwiZmFsbGJhY2tTbmFwc2hvdCIsInVzZXJzIiwidXNlcklkcyIsIlNldCIsInN0b3JpZXNEYXRhIiwiZm9yRWFjaCIsImRvYyIsInN0b3J5RGF0YSIsImRhdGEiLCJwdXNoIiwiaWQiLCJyZXNvdXJjZVR5cGUiLCJkdXJhdGlvbiIsInRpbWVzdGFtcCIsInRvRGF0ZSIsInRvSVNPU3RyaW5nIiwiZXhwaXJ5VGltZSIsImFkZCIsInVzZXJzRGF0YSIsInVzZXJzUHJvbWlzZXMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJ1c2VyRG9jIiwiZXhpc3RzIiwiZGlzcGxheU5hbWUiLCJwaG90b1VSTCIsIlByb21pc2UiLCJhbGwiLCJ2aWV3ZWRTdG9yaWVzUmVmIiwidmlld2VkU25hcHNob3QiLCJ2aWV3ZWRTdG9yaWVzIiwibGVuZ3RoIiwiZ3JvdXBlZFN0b3JpZXMiLCJzdG9yeSIsImZvcm1hdHRlZFVzZXJzIiwiT2JqZWN0Iiwia2V5cyIsInN0b3JpZXMiLCJmaWx0ZXJlZFVzZXJzIiwiZmlsdGVyIiwidXNlciIsImZpbmQiLCJ1Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/story/list/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/firebase/admin.ts":
/*!*******************************!*\
  !*** ./src/firebase/admin.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auth: () => (/* binding */ auth),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   firestore: () => (/* binding */ firestore)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\n// Cek apakah sudah terinisialisasi\nif (!firebase_admin__WEBPACK_IMPORTED_MODULE_0__.apps.length) {\n    try {\n        firebase_admin__WEBPACK_IMPORTED_MODULE_0__.initializeApp({\n            credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0__.credential.cert({\n                projectId: process.env.FIREBASE_PROJECT_ID,\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n                privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, \"\\n\")\n            }),\n            databaseURL: process.env.FIREBASE_DATABASE_URL\n        });\n    } catch (error) {\n        console.error(\"Firebase admin initialization error\", error);\n    }\n}\nconst auth = firebase_admin__WEBPACK_IMPORTED_MODULE_0__.auth();\nconst firestore = firebase_admin__WEBPACK_IMPORTED_MODULE_0__.firestore();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvZmlyZWJhc2UvYWRtaW4udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFFeEMsbUNBQW1DO0FBQ25DLElBQUksQ0FBQ0EsZ0RBQVUsQ0FBQ0UsTUFBTSxFQUFFO0lBQ3RCLElBQUk7UUFDRkYseURBQW1CLENBQUM7WUFDbEJJLFlBQVlKLHNEQUFnQixDQUFDSyxJQUFJLENBQUM7Z0JBQ2hDQyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLG1CQUFtQjtnQkFDMUNDLGFBQWFILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO2dCQUM5Q0MsWUFBWUwsUUFBUUMsR0FBRyxDQUFDSyxvQkFBb0IsRUFBRUMsUUFBUSxRQUFRO1lBQ2hFO1lBQ0FDLGFBQWFSLFFBQVFDLEdBQUcsQ0FBQ1EscUJBQXFCO1FBQ2hEO0lBQ0YsRUFBRSxPQUFPQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx1Q0FBdUNBO0lBQ3ZEO0FBQ0Y7QUFFTyxNQUFNRSxPQUFPbkIsZ0RBQVUsR0FBRztBQUMxQixNQUFNb0IsWUFBWXBCLHFEQUFlLEdBQUc7QUFDM0MsaUVBQWVBLDJDQUFLQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFsbG8vLi9zcmMvZmlyZWJhc2UvYWRtaW4udHM/OThiNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhZG1pbiBmcm9tICdmaXJlYmFzZS1hZG1pbic7XHJcblxyXG4vLyBDZWsgYXBha2FoIHN1ZGFoIHRlcmluaXNpYWxpc2FzaVxyXG5pZiAoIWFkbWluLmFwcHMubGVuZ3RoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGFkbWluLmluaXRpYWxpemVBcHAoe1xyXG4gICAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoe1xyXG4gICAgICAgIHByb2plY3RJZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCxcclxuICAgICAgICBjbGllbnRFbWFpbDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQ0xJRU5UX0VNQUlMLFxyXG4gICAgICAgIHByaXZhdGVLZXk6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZPy5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJyksXHJcbiAgICAgIH0pLFxyXG4gICAgICBkYXRhYmFzZVVSTDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfREFUQUJBU0VfVVJMLFxyXG4gICAgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZpcmViYXNlIGFkbWluIGluaXRpYWxpemF0aW9uIGVycm9yJywgZXJyb3IpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGggPSBhZG1pbi5hdXRoKCk7XHJcbmV4cG9ydCBjb25zdCBmaXJlc3RvcmUgPSBhZG1pbi5maXJlc3RvcmUoKTtcclxuZXhwb3J0IGRlZmF1bHQgYWRtaW47ICJdLCJuYW1lcyI6WyJhZG1pbiIsImFwcHMiLCJsZW5ndGgiLCJpbml0aWFsaXplQXBwIiwiY3JlZGVudGlhbCIsImNlcnQiLCJwcm9qZWN0SWQiLCJwcm9jZXNzIiwiZW52IiwiRklSRUJBU0VfUFJPSkVDVF9JRCIsImNsaWVudEVtYWlsIiwiRklSRUJBU0VfQ0xJRU5UX0VNQUlMIiwicHJpdmF0ZUtleSIsIkZJUkVCQVNFX1BSSVZBVEVfS0VZIiwicmVwbGFjZSIsImRhdGFiYXNlVVJMIiwiRklSRUJBU0VfREFUQUJBU0VfVVJMIiwiZXJyb3IiLCJjb25zb2xlIiwiYXV0aCIsImZpcmVzdG9yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/firebase/admin.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fstory%2Flist%2Froute&page=%2Fapi%2Fstory%2Flist%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fstory%2Flist%2Froute.ts&appDir=C%3A%5Cxampp%5Chtdocs%5CHallo%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5Cxampp%5Chtdocs%5CHallo&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();